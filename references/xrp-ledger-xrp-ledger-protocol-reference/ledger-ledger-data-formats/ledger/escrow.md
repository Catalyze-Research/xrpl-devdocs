# Escrow

_(에스크로 수정안에 의해 추가되었습니다.)_

에스크로 객체 유형은 실행 또는 취소를 기다리는 보류된 XRP 지불을 나타냅니다. EscrowCreate 트랜잭션은 ledger에 에스크로 객체를 생성합니다. EscrowFinish 또는 EscrowCancel 트랜잭션이 성공하면 객체가 삭제됩니다. 에스크로 객체에 암호화 조건이 있는 경우, EscrowFinish 트랜잭션이 조건을 만족하는 해당 이행을 제공하는 경우에만 결제가 성공할 수 있습니다. (지원되는 유일한 암호화 조건 유형은 PREIMAGE-SHA-256입니다.) 에스크로 객체에 FinishAfter 시간이 있는 경우, 보류된 결제는 해당 시간 이후에만 실행할 수 있습니다.

에스크로 객체는 두 개의 주소와 연결됩니다:

* 에스크로 객체를 생성할 때 XRP를 제공한 소유자. 보류된 결제가 취소되면 XRP는 소유자에게 반환됩니다.
* 목적지: 보류된 결제가 성공할 때 XRP가 지급되는 곳입니다. 목적지는 소유자와 동일할 수 있습니다.

## 에스크로 JSON 예시

```
{
    "Account": "rf1BiGeXwwQoi8Z2ueFYTEXSwuJYfV2Jpn",
    "Amount": "10000",
    "CancelAfter": 545440232,
    "Condition": "A0258020A82A88B2DF843A54F58772E4A3861866ECDB4157645DD9AE528C1D3AEEDABAB6810120",
    "Destination": "ra5nK24KXen9AHvsdFTKHSANinZseWnPcX",
    "DestinationTag": 23480,
    "FinishAfter": 545354132,
    "Flags": 0,
    "LedgerEntryType": "Escrow",
    "OwnerNode": "0000000000000000",
    "DestinationNode": "0000000000000000",
    "PreviousTxnID": "C44F2EB84196B9AD820313DBEBA6316A15C9A2D35787579ED172B87A30131DA7",
    "PreviousTxnLgrSeq": 28991004,
    "SourceTag": 11747,
    "index": "DC5F3851D8A1AB622F957761E5963BC5BD439D5C24AC6AD7AC4523F0640244AC"
}
```

## 에스크로 필드

에스크로 객체에는 다음과 같은 필드가 있습니다:

| 이름                  | JSON 유형 | 내부 유형  | 필수 여부 | 설명                                                                                                                                            |
| ------------------- | ------- | ------ | ----- | --------------------------------------------------------------------------------------------------------------------------------------------- |
| `Account`           | 문자열     | 계정 ID  | 예     | 이 보류된 지불의 소유자(발신인) 주소입니다. XRP를 제공한 계정으로, 보류된 결제가 취소되면 돌려받습니다.                                                                                 |
| `Amount`            | 문자열     | 금액     | 예     | 보류된 지불에 의해 전달될 XRP의 양(드롭)입니다.                                                                                                                 |
| `CancelAfter`       | 숫자      | Uint32 | 아니요   | _보류된 지불은 이 필드가 있고_ 지정된 시간이 지난 경우에만 취소할 수 있습니다. 구체적으로 이것은 Ripple 에포크 이후의 초로 지정되며 이전에 검증된 ledger의 종료 시간보다 빠르면 "지나갔습니다".                         |
| `Condition`         | 문자열     | 얼룩     | 아니요   | PREIMAGE -SHA-256 암호화 조건(16진수)이 있는 경우. EscrowFinish 트랜잭션에는 이 조건을 충족하는 이행이 포함되어야 합니다.                                                          |
| `Destination`       | 문자열     | 계정 ID  | 예     | 보류된 지불이 성공하면 XRP가 지불되는 목적지 주소.                                                                                                                |
| `DestinationNode`   | 문자열     | Uint64 | 아니요   | 디렉터리가 여러 페이지로 구성된 경우 대상 소유자 디렉터리의 어느 페이지가 이 개체에 연결되어 있는지 나타내는 힌트입니다. fix1523 수정안을 활성화하기 전에 생성된 에스크로에서는 생략되었습니다.                               |
| `DestinationTag`    | 숫자      | Uint32 | 아니요   | 대상 주소의 호스팅된 수신자와 같이 이 보류된 지불에 대한 대상을 추가로 지정하는 임의의 태그입니다.                                                                                      |
| `FinishAfter`       | 숫자      | Uint32 | 아니요   | 보류된 결제는 이 필드가 존재하고 지정한 시간이 지난 경우에만 취소할 수 있습니다. 구체적으로는 Ripple 에포크 이후 초 단위로 지정되며, 이전 검증 ledger의 마감 시간보다 빠르면 "경과한 것"으로 간주합니다.                    |
| `Flags`             | 숫자      | Uint32 | 예     | 이 개체에 대해 활성화된 boolean 플래그의 비트맵입니다. 현재 프로토콜은 `Escrow`개체에 대한 플래그를 정의하지 않습니다. 값은 항상 `0`입니다.                                                      |
| `LedgerEntryType`   | 문자열     | Uint16 | 예     | Escrow 문자열에 매핑된 값 0x0075는 이 개체가 에스크로 개체임을 나타냅니다.                                                                                              |
| `OwnerNode`         | 문자열     | Uint64 | 예     | 디렉터리가 여러 페이지로 구성된 경우 소유자 디렉터리의 어느 페이지가 이 개체에 연결되는지 나타내는 힌트입니다. **참고:** 해당 값은 계정에서 파생될 수 있으므로 객체에는 객체가 포함된 소유자 디렉터리로 직접 연결되는 링크가 포함되어 있지 않습니다. |
| `PreviousTxnID`     | 문자열     | 해시256  | 예     | 가장 최근에 이 개체를 수정한 트랜잭션의 식별 해시입니다.                                                                                                              |
| `PreviousTxnLgrSeq` | 숫자      | Uint32 | 예     | 가장 최근에 이 개체를 수정한 트랜잭션이 포함된 ledger의 인덱스입니다.                                                                                                    |
| `SourceTag`         | 숫자      | Uint32 | 아니요   | 소유자 주소의 호스팅된 수신자와 같이 이 보류된 지불에 대한 소스를 추가로 지정하는 임의의 태그입니다.                                                                                     |

## 에스크로 ID 형식

에스크로 객체의 ID는 다음 값의 절반을 순서대로 연결한 SHA-512입니다:

* 에스크로 스페이스 키(0x0075).
* 에스크로 객체를 생성한 EscrowCreate 트랜잭션 발신자의 계정 ID입니다.
* 에스크로 객체를 생성한 EscrowCreate 트랜잭션의 시퀀스 번호. EscrowCreate 트랜잭션이 티켓을 사용한 경우 티켓 시퀀스 값을 대신 사용하세요.
