# 거래소에 XRP 상장하기

잔이 문서는 거래소가 XRP를 상장하기 위해 거쳐야 하는 단계를 설명합니다. 이러한 단계는 사용자를 대신해 자금을 보관하고 사용자가 다른 디지털 자산, 법정 화폐 또는 기타 유형의 자산을 입금, 출금, 거래할 수 있도록 하는 수탁 거래소를 대상으로 합니다.

## 알파 거래소

이 문서에서는 예시를 보여드리기 위해 알파 거래소라는 가상의 기업을 사용해 XRP를 상장하는 데 필요한 높은 수준의 단계를 설명합니다. 이 문서의 목적상 알파 거래소는:

* 현재 BTC/USD 상장을 전문으로 합니다.
* BTC/XRP 및 XRP/USD 트랜잭션 쌍을 추가하고자 함.
* 모든 고객의 잔고를 유지합니다.
* 지원되는 각 화폐에 대한 잔액 유지.

## 사용자 혜택

알파 거래소가 BTC/XRP 및 XRP/USD 트랜잭션 쌍을 상장하고자 하는 이유는 부분적으로 이러한 쌍을 상장하면 사용자에게 혜택이 돌아가기 때문입니다. 구체적으로, 이 지원은 사용자가 다음을 수행할 수 있도록 하려고 합니다:

* XRP Ledger에서 알파 거래소에 XRP 입금하기.
* 알파 거래소에서 XRP Ledger로 XRP 인출하기.
* BTC, USD 등 다른 화폐로 XRP 거래하기.

## XRP 지원을 위한 요구 사항

알파 거래소가 XRP를 지원하려면 다음을 수행해야 합니다:

* 새 계정 생성 및 유지.
* 대차 대조표 생성 및 유지.

참조:

* 규정 준수 가이드라인 - 토큰 발행자와 거래소는 서로 다르지만, 거래소는 현지 규정을 준수하고 해당 기관에 보고해야 합니다.
* XRP Ledger으로 전송하기 위한 요건.
* XRP Ledger에서 받기 위한 요건.
* 주의 사항.

## 부분 결제

통합하기 전에 거래소는 부분 결제 기능에 대해 알고 있어야 합니다. 이 기능을 사용하면 XRP Ledger 사용자가 송금한 금액이 SendMax를 늘리는 대신 받는 금액이 줄어드는 성공적인 결제를 보낼 수 있습니다. 이 기능은 송금인에게 추가 비용을 발생시키지 않고 결제를 반환하는 데 유용할 수 있습니다.

## 부분 결제 경고

tfPartialPayment 플래그가 활성화된 경우 금액 필드는 수령 금액이 보장되지 않습니다. 결제 메타데이터의 delivered\_amount 필드는 대상 계정에서 실제로 수령한 화폐 금액을 나타냅니다. 결제를 받을 때는 금액 필드 대신 delivered\_amount을 사용하여 계정이 수령한 금액을 확인합니다.

{% hint style="info" %}
Warning:

악의적인 행위자가 이를 악용할 수 있으니 주의하세요. 자세한 내용은 부분 결제를 참조하세요.
{% endhint %}

## 계정

XRP는 XRP Ledger에 있는 계정(지갑 또는 주소라고도 함)에 보관됩니다. XRP Ledger의 계정은 비트코인 등 다른 블록체인 ledger의 계정과 다르며, 계정에는 오버헤드가 거의 또는 전혀 발생하지 않습니다. XRP Ledger에서는 계정 상태가 ledger별로 저장되며 계정을 삭제하기가 쉽지 않습니다. 계정 저장과 관련된 비용을 상쇄하기 위해 각 계정은 다른 계정으로 전송할 수 없는 별도의 XRP를 보유해야 합니다. 이러한 이유로 Ripple은 기관이 과도하거나 불필요한 계정을 만들지 않을 것을 권장합니다.

Ripple의 권장 모범 사례를 따르기 위해 알파 거래소는 XRP Ledger에 최소 2개의 새 계정을 생성해야 합니다. 손상된 비밀 키와 관련된 위험을 최소화하기 위해 Ripple은 콜드, 핫, 웜 계정을 만들 것을 권장합니다(각각 콜드 지갑, 핫 지갑, 웜 지갑이라고도 함). 핫/웜/콜드 모델은 보안과 편의성의 균형을 맞추기 위한 것입니다. Ripple을 상장하는 거래소는 다음 계정을 생성해야 합니다:

* 콜드 월렛은 대부분의 XRP와 고객 자금을 안전하게 보관할 수 있는 지갑입니다. 거래소의 경우 이 계정은 사용자가 예치금을 보내는 주소이기도 합니다. 최적의 보안을 제공하려면 이 계정의 비밀 키는 오프라인 상태여야 합니다. 악의적인 공격자가 거래소의 콜드월렛을 손상시키면 다음과 같은 결과가 발생할 수 있습니다:
  * 악의적인 행위자가 콜드월렛에 있는 모든 XRP에 대한 전체 액세스 권한을 얻습니다.
  * 마스터 키가 유출되면, 악의적인 행위자는 마스터 키를 비활성화하고 새로운 일반 키 또는 서명자 목록을 설정하여 콜드 월렛을 영구적으로 제어할 수 있습니다. 이렇게 되면 악의적인 공격자는 향후 콜드월렛에서 수신하는 모든 XRP를 제어할 수 있게 됩니다.
    * 이런 일이 발생하면 거래소는 새로운 콜드월렛 주소를 만들고 고객에게 새 주소를 알려야 합니다.
  * 일반 키 또는 서명자 목록이 손상된 경우 거래소는 콜드월렛에 대한 통제권을 되찾을 수 있습니다. 그러나 악의적인 행위자의 행동 중 일부는 쉽게 되돌릴 수 없습니다.
    * 악의적인 행위자는 콜드 월렛을 사용하여 XRP Ledger에 토큰을 발행할 수 있지만, 해당 토큰은 누구도 가치를 인정해서는 안 됩니다(거래소가 토큰 발행자가 아닌 경우).
    * 악의적인 행위자가 계정에 대해 승인된 신뢰선선 설정을 활성화한 경우 해당 설정을 해제할 수 없지만, 이는 토큰 발행에만 관련되며 발행자가 아닌 거래소에는 영향을 미치지 않아야 합니다. 악의적인 행위자가 마스터 키로 변경한 다른 모든 설정은 되돌릴 수 있습니다.
* 하나 이상의 핫월렛으로 고객의 XRP 출금과 입금을 관리하는 일상적인 업무를 수행합니다. 예를 들어, 핫월렛을 통해 거래소는 이러한 유형의 자동화된 XRP 이체를 안전하게 지원할 수 있습니다. 즉시 출금 요청을 처리하려면 핫월렛이 온라인 상태여야 합니다. 핫월렛이 손상될 경우 발생할 수 있는 결과에 대한 자세한 내용은 [Operational Account](https://xrpl.org/issuing-and-operational-addresses.html#operational-address-compromise) 계정 손상을 참조하세요.
* 선택 사항으로 콜드월렛과 핫월렛 사이에 추가 보안 계층을 제공하기 위해 하나 이상의 웜월렛을 사용할 수 있습니다. 핫월렛과 달리 웜월렛의 비밀 키는 온라인 상태일 필요가 없습니다. 또한, 여러 사람에게 웜월렛의 비밀 키를 배포하고 다중 서명을 구현하여 보안을 강화할 수 있습니다. 웜월렛이 손상될 경우 발생할 수 있는 결과에 대한 자세한 내용은 [Standby Account](https://xrpl.org/issuing-and-operational-addresses.html#standby-address-compromise) 손상을 참조하세요.

참조 :

* 게이트웨이 가이드의 "권장 비즈니스 관행" 참조.
* 발급 및 운영 주소.
* 계정 만들기.
* Reserves.

## 대차 대조표

고객의 XRP를 보관하기 위해 알파 거래소는 각 고객의 XRP 잔액과 자체 보유량을 추적해야 합니다. 이를 위해 알파 거래소는 추가 대차 대조표 또는 회계 시스템을 생성하고 유지해야 합니다. 다음 표는 이 대차 대조표의 모습을 보여줍니다.

새로운 XRP Ledger 계정(알파 핫, 알파 웜, 알파 콜드)은 XRP Ledger의 XRP 잔고 표의 사용자 열에 있습니다.

알파 거래소 XRP 잔액 테이블은 새로운 추가 대차 대조표를 나타냅니다. 알파 거래소의 소프트웨어는 이 회계 시스템에서 사용자의 XRP 잔액을 관리합니다.

| XRP Ledger의 XRP 잔액 |        |   | 알파 거래소 XRP 잔액 |         |    |
| ------------------ | ------ | - | ------------- | ------- | -- |
| 사용자                | 잔액     |   | 계정 번호         | 사용자     | 잔액 |
| Dave               | 25,000 |   | 123           | Alice   | 0  |
| Edward             | 45,000 |   | 456           | Bob     | 0  |
| Charlie            | 50,000 |   | 789           | Charlie | 0  |
| _Alpha Hot_        | 0      |   | ...           |         |    |
| _Alpha Warm_       | 0      |   |               |         |    |
| _Alpha Cold_       | 0      |   |               |         |    |
| ...                |        |   |               |         |    |

## XRP 금액

XRP 금액은 XRP Ledger에 부호 없는 정수의 드롭 수로 표시되며, 여기서 1XRP는 1,000,000드롭입니다. Ripple은 소프트웨어가 XRP 잔액을 정수의 드롭 수로 저장하고 이 값에 대해 정수 연산을 수행할 것을 권장합니다. 그러나 사용자 인터페이스는 잔액을 XRP 단위로 표시해야 합니다.

한 drop(.000001 XRP)은 더 세분할 수 없습니다. XRP와 다른 자산 간의 환율을 계산하고 표시할 때 이 점을 염두에 두시기 바랍니다.

자세한 내용은 화폐 금액 지정을 참조하세요.

## 온-Ledger 및 오프-Ledger

알파 거래소와 같은 거래소에서 XRP는 "온-Ledger" 또는 "오프-Ledger"가 될 수 있습니다:

* 온-Ledger XRP: XRP 보유자의 공개 주소를 지정하여 공개 XRP Ledger을 통해 조회할 수 있는 XRP입니다. 이러한 잔액의 트랜잭션 상대방은 XRP Ledger입니다. 자세한 내용은 XRP를 참조하세요.
* 오프-Ledger XRP: 거래소의 회계 시스템에 의해 보유되며 거래소 인터페이스를 통해 조회할 수 있는 XRP입니다. 장외 XRP 잔액은 신용 기반입니다. 트랜잭션 상대방은 XRP를 보유한 거래소입니다.\
  오프-Ledger XRP는 거래소 참여자 간에 거래됩니다. 이러한 트랜잭션을 지원하려면 거래소는 트랜잭션에 사용할 수 있는 오프-Ledger XRP의 총액과 동일한 온-Ledger XRP 잔액을 보유해야 합니다.

## 자금 흐름

나머지 섹션에서는 사용자가 XRP 잔액을 입금, 트랜잭션 및 상환하기 시작할 때 알파 거래소가 관리하는 계정을 통해 자금이 어떻게 흐르는지 설명합니다. 자금 흐름을 설명하기 위해 이 문서에서는 "대차 대조표" 섹션에 소개된 표를 사용합니다.

거래소의 일반적인 자금 흐름에는 네 가지 주요 단계가 있습니다:

* 거래소에 XRP 입금.
* XRP 보유량 재조정.
* 거래소에서 XRP 인출.
* 거래소에서 XRP 트랜잭션.

이 목록에는 거래소에 필요한 전제 조건이 포함되어 있지 않습니다.

현재 알파 거래소는 XRP Ledger에 핫월렛, 웜월렛, 콜드월렛을 생성하여 대차 대조표에 추가했지만 사용자로부터 입금을 받지 않고 있습니다.

| XRP Ledger의 XRP 잔액 |        |   | 알파 거래소 XRP 잔액 |         |    |
| ------------------ | ------ | - | ------------- | ------- | -- |
| 사용자                | 잔액     |   | 계정 번호         | 사용자     | 잔액 |
| Dave               | 25,000 |   | 123           | Alice   | 0  |
| Edward             | 45,000 |   | 456           | Bob     | 0  |
| Charlie            | 50,000 |   | 789           | Charlie | 0  |
| _Alpha Hot_        | 0      |   | ...           |         |    |
| _Alpha Warm_       | 0      |   |               |         |    |
| _Alpha Cold_       | 0      |   |               |         |    |
| ...                |        |   |               |         |    |

## 거래소에 XRP 입금하기

장부 외 XRP 잔액을 추적하려면 거래소는 새 대차 대조표(또는 유사한 회계 시스템)를 만들어야 합니다. 다음 표는 사용자가 XRP를 입금하기 시작할 때 알파 거래소의 새 대차 대조표에서 발생하는 잔액 변화를 보여줍니다.

찰리라는 사용자가 알파 거래소에 50,000 XRP를 입금하려고 합니다. 이를 위해서는 다음 단계가 필요합니다:

1. 찰리는 알파 거래소의 콜드 월렛에 50,000 XRP를 지불합니다.\
   a. 찰리는 결제에 식별자(이 경우 789)를 추가하여 알파 거래소의 자신의 계정과 연결합니다. 이를 데스티네이션 태그라고 합니다. (이를 사용하려면 알파 거래소는 모든 계정에 asfRequireDest 플래그를 설정하여 들어오는 모든 결제에 찰리와 같은 데스티네이션 태그가 있어야 합니다. 자세한 내용은 계정 설정 플래그를 참조하세요).
2. 알파 거래소의 소프트웨어는 수신 결제를 감지하고 789를 찰리 계정의 데스티네이션 태그로 인식합니다.
3.  수신 결제를 감지하면 알파 거래소의 소프트웨어가 대차 대조표를 업데이트하여 수신한 50,000 XRP를 찰리가 관리하고 있음을 표시합니다.\
    이제 찰리는 거래소에서 최대 50,000개의 XRP를 사용할 수 있습니다. 예를 들어, 그는 비트코인 또는 알파 거래소가 지원하는 다른 화폐로 XRP를 트랜잭션하는 오퍼를 생성할 수 있습니다.

    | XRP Ledger의 XRP 잔액 |                                     |   | 알파 거래소 XRP 잔액 |         |                               |
    | ------------------ | ----------------------------------- | - | ------------- | ------- | ----------------------------- |
    | 사용자                | 잔액                                  |   | 계정 번호         | 사용자     | 잔액                            |
    | Dave               | 25,000                              |   | 123           | Alice   | 0                             |
    | Edward             | 45,000                              |   | 456           | Bob     | 0                             |
    | Charlie            | <p><del>100,000</del><br>50,000</p> |   | 789           | Charlie | <p><del>0</del><br>50,000</p> |
    |                    |                                     |   |               |         |                               |
    | Alpha Hot          | 0                                   |   | ...           |         |                               |
    | Alpha Warm         | 0                                   |   |               |         |                               |
    | Alpha Cold         | <p><del>0</del><br>50,000</p>       |   |               |         |                               |
    | ...                |                                     |   |               |         |                               |

## 거래소에서 XRP 거래

알파 거래소 사용자(예: 찰리)는 알파 거래소에서 신용 기반 잔액을 트랜잭션할 수 있습니다. 알파 거래소는 이러한 트랜잭션이 이루어질 때 새로운 대차 대조표에 사용자 잔액을 추적해야 합니다. 이러한 트랜잭션은 장부 외 트랜잭션이며 XRP Ledger과는 독립적이므로 잔액 변동은 XRP Ledger에 기록되지 않습니다.

자신의 XRP Ledger 계정에 XRP를 보유하고 있는 고객은 XRP Ledger에 내장된 분산 거래소를 사용하여 게이트웨이에서 발행한 화폐를 트랜잭션할 수도 있습니다. XRP Ledger에서의 트랜잭션에 대한 자세한 내용은 오퍼의 수명주기를 참조하세요.

## XRP 보유량 재조정

거래소는 언제든지 핫월렛과 콜드월렛 사이의 잔액을 조정할 수 있습니다. 각 잔액 조정은 트랜잭션 비용을 소모하지만, 모든 계정의 총 잔액에는 영향을 미치지 않습니다. 온-Ledger 총 잔액은 항상 거래소에서 트랜잭션할 수 있는 총 잔액을 초과해야 합니다. (초과 금액은 XRP Ledger의 트랜잭션 비용을 충당하기에 충분해야 합니다.)

다음 표는 알파 거래소의 콜드 월렛과 핫 월렛 사이에서 80,000 XRP의 잔액 조정(XRP Ledger의 결제 트랜잭션을 통해)을 보여주는데, 콜드 월렛은 인출되고 핫 월렛은 입금되었습니다. 지불이 역전되면(핫 월렛에서 인출하고 콜드 월렛에 입금) 핫 월렛 잔액이 감소합니다. 이와 같은 잔액 조정을 통해 거래소는 온라인 핫월렛에 XRP를 보유하는 것과 관련된 위험을 제한할 수 있습니다.

| 알파 거래소 XRP 장외 잔고 |         |        |   | 알파 거래소 XRP 온-Ledger 잔고 |                                      |
| ---------------- | ------- | ------ | - | ---------------------- | ------------------------------------ |
| 계정 번호            | 사용자     | 잔액     |   | XRP Ledger 계정          | 잔액                                   |
| 123              | Alice   | 80,000 |   | Hot                    | <p><del>0</del><br>80,000</p>        |
| 456              | Bob     | 50,000 |   | Warm                   | 0                                    |
| ….               |         |        |   | ….                     |                                      |
| 789              | Charlie | 50,000 |   | Cold                   | <p><del>180,000</del><br>100,000</p> |
|                  |         |        |   |                        |                                      |
| ...              |         |        |   | ...                    |                                      |

## 거래소에서 XRP 인출

인출을 통해 거래소 사용자는 거래소의 오프-Ledger 대차 대조표에서 XRP Ledger에 있는 계정으로 XRP를 옮길 수 있습니다.

이 예시에서 찰리는 알파 거래소에서 25,000 XRP를 인출합니다. 여기에는 다음 단계가 포함됩니다:

1. 찰리는 알파 거래소 웹사이트에서 프로세스를 시작합니다. 그는 25,000 XRP를 XRP Ledger에 있는 특정 계정(다음 표에서 "찰리 XRP Ledger"이라고 함)으로 이체하라는 지침을 제공합니다.
2.  찰리의 지시에 따라 알파 거래소는 다음을 수행합니다:\
    a. 오프-Ledger 대차 대조표에 있는 찰리의 계정에서 해당 금액(25,000 XRP)을 인출합니다.\
    b. 알파 거래소의 핫월렛에서 찰리의 XRP Ledger 계정으로 동일한 금액(25,000 XRP)을 XRP Ledger에 지불합니다.

    | XRP Ledger 온-Ledger XRP 잔액 |                                    |   | 알파 거래소 XRP 장외 잔고 |         |                                    |   | 알파 거래소 XRP 온-Ledger 잔고 |                                    |
    | -------------------------- | ---------------------------------- | - | ---------------- | ------- | ---------------------------------- | - | ---------------------- | ---------------------------------- |
    | 사용자                        | 잔액                                 |   | 계정 번호            | 사용자     | 잔액                                 |   | XRP Ledger 계정          | 잔액                                 |
    | Dave                       | 25,000                             |   | 123              | Alice   | 80,000                             |   | Hot                    | <p><del>80,000</del><br>55,000</p> |
    | Edward                     | 45,000                             |   | 456              | Bob     | 50,000                             |   | Warm                   | 0                                  |
    | ….                         |                                    |   | ….               |         |                                    |   | ….                     |                                    |
    | Charlie XRP Ledger         | <p><del>50,000</del><br>75,000</p> |   | 789              | Charlie | <p><del>50,000</del><br>25,000</p> |   | Cold                   | 100,000                            |
    |                            |                                    |   |                  |         |                                    |   |                        |                                    |
    | ...                        |                                    |   | ...              |         |                                    |   |                        |                                    |
